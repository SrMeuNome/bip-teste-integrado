<div class="container">
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <div class="header-title">
              <button mat-icon-button (click)="voltar()" class="back-button">
                <mat-icon>arrow_back</mat-icon>
              </button>
              <h1>{{ isEditMode ? 'Editar Benefício' : 'Novo Benefício' }}</h1>
            </div>
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>
            @if(loading) {
                <div class="loading-container">
                    <mat-progress-spinner></mat-progress-spinner>
                </div>
            }

            @if(!loading) {
                <form [formGroup]="beneficioForm" (ngSubmit)="onSubmit()">
                    <div class="form-row">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Nome</mat-label>
                        <input matInput formControlName="nome" placeholder="Digite o nome do benefício">
                        <mat-icon matPrefix>label</mat-icon>
                        @if (beneficioForm.get('nome')?.hasError('required')) {
                            <mat-error>
                                Nome é obrigatório
                            </mat-error>
                        }
                        @if (beneficioForm.get('nome')?.hasError('maxlength')) {
                            <mat-error>
                                Nome deve ter no máximo 100 caracteres
                            </mat-error>
                        }
                    </mat-form-field>
                    </div>

                    <div class="form-row">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Descrição</mat-label>
                        <textarea 
                        matInput 
                        formControlName="descricao" 
                        placeholder="Digite a descrição do benefício"
                        rows="4">
                        </textarea>
                        <mat-icon matPrefix>description</mat-icon>
                        @if (beneficioForm.get('descricao')?.hasError('required')) {
                            <mat-error>
                                Descrição é obrigatória
                            </mat-error>
                        }
                        @if (beneficioForm.get('descricao')?.hasError('maxlength')) {
                            <mat-error>
                                Descrição deve ter no máximo 500 caracteres
                            </mat-error>
                        }
                    </mat-form-field>
                    </div>

                    <div class="form-row">
                        <mat-form-field appearance="outline" class="full-width">
                            <mat-label>Valor</mat-label>
                            <input 
                                matInput 
                                type="number" 
                                formControlName="valor" 
                                placeholder="0.00"
                                step="0.01">
                                <mat-icon matPrefix>attach_money</mat-icon>
                            @if(beneficioForm.get('valor')?.hasError('required')) {
                                <mat-error>
                                Valor é obrigatório
                                </mat-error>
                            }
                            @if(beneficioForm.get('valor')?.hasError('min')) {
                                <mat-error>
                                    Valor deve ser maior ou igual a 0
                                </mat-error>
                            }
                        </mat-form-field>
                    </div>

                    <div class="form-row toggle-row">
                        <mat-label class="status-text">Status:</mat-label>
                        <mat-slide-toggle formControlName="ativo" color="primary">
                            <span class="toggle-label">
                            </span>
                        </mat-slide-toggle>
                    </div>

                    <div class="form-actions">
                    <button 
                        mat-stroked-button 
                        type="button" 
                        (click)="voltar()"
                        [disabled]="submitting">
                        <mat-icon>close</mat-icon>
                        Cancelar
                    </button>
                    
                    <button 
                        mat-raised-button 
                        color="primary" 
                        type="submit"
                        [disabled]="beneficioForm.invalid || submitting">
                        <mat-icon>{{ submitting ? 'hourglass_empty' : 'save' }}</mat-icon>
                        {{ submitting ? 'Salvando...' : 'Salvar' }}
                    </button>
                    </div>
                </form>
            }
        </mat-card-content>
      </mat-card>
    </div>